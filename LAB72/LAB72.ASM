TITLE DIV_GCD
.MODEL SMALL
.STACK 100H
.DATA
M DW ?
N DW ?
Q DW ?
R DW ?
CR EQU 0DH
LF EQU 0AH
NEWLINE DB CR, LF, '$'
.CODE
MAIN PROC
; iniation DS
	MOV AX, @DATA
	MOV DS, AX
; input
	CALL INDEC
	MOV M, AX
	CALL INDEC
	MOV N, AX
	;MOV AH, 9
	;LEA DX, NEWLINE
	;INT 21H
; N = counter	
	MOV CX, N 
WHILE_LOOP:
; M/N
	MOV AX, M
	MOV BX, N
	XOR DX, DX
	DIV BX
	MOV Q, AX
	MOV R, DX
; if R = 0 go EXIT
	MOV BX, R
	CMP BX, 0
	JE STOP
	CMP BX, 0
	JNE REPLACE
	
REPLACE:
; replace M by N and N by R
	DEC CX
	MOV BX, N
	MOV M, BX
	MOV AX, R
	MOV N, AX
	JMP WHILE_LOOP
	CMP CX, 0
	JE EXIT
	
STOP:
	MOV AX, N
	CALL OUTDEC

EXIT:

; return to DOS
	MOV AH, 4CH
	INT 21H

MAIN ENDP
	INCLUDE INDEC.ASM
	INCLUDE OUTDEC.ASM
	END MAIN